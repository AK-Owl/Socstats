  <p id="notice"><%= notice %></p>
  <header class="header_analysis">
    <div class="container d-flex h-100 align-items-center">
      <div class="mx-auto text-center">
        <h1 class="mx-auto my-0 text-uppercase">Results</h1>
      </div>
    </div>
  </header>



<style>
#chartdiv {
  width: 50%;
  height: 500px;
}
#chartdiv2 {
  width: 100%;
  height: 500px;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
</style>

<!-- HTML -->
<div id="chartdiv">

<!--Refrences: from https://www.amcharts.com/ : JavaScript code is refractored based on the instructions provided -->
<!-- Resources -->
<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

<!-- Chart code -->
<script>
/**
 * --------------------------------------------------------
 * This demo was created using amCharts V4 preview release.
 * 
 * V4 is the latest installement in amCharts data viz
 * library family, to be released in the first half of
 * 2018.
 *
 * For more information and documentation visit:
 * https://www.amcharts.com/docs/v4/
 * --------------------------------------------------------
 */

am4core.ready(function() {
am4core.useTheme(am4themes_animated);

// Create chart instance
var chart = am4core.create("chartdiv", am4charts.XYChart);
chart.paddingTop = 40;
// Add data
chart.data = [{
"country": "<%= raw @countries[0]%>",
  "HPI": <%= raw @pfscr[0]%>,
  "HFI": <%= raw @hdscr[0]%>,
  "HEI": <%= raw @efscr[0]%>,
  "HDI": <%= raw @hdindex[0]%>,
  "GII": <%= raw @gii[0]%>
}, {
"country": "<%= raw @countries[1]%>",
  "HPI": <%= raw @pfscr[1]%>,
  "HFI": <%= raw @hdscr[1]%>,
  "HEI": <%= raw @efscr[1]%>,
  "HDI": <%= raw @hdindex[1]%>,
  "GII": <%= raw @gii[1]%>
}, {
"country": "<%= raw @countries[2]%>",
  "HPI": <%= raw @pfscr[2]%>,
  "HFI": <%= raw @hdscr[2]%>,
  "HEI": <%= raw @efscr[2]%>,
  "HDI": <%= raw @hdindex[2]%>,
  "GII": <%= raw @gii[2]%>
}, {
"country": "<%= raw @countries[3]%>",
  "HPI": <%= raw @pfscr[3]%>,
  "HFI": <%= raw @hdscr[3]%>,
  "HEI": <%= raw @efscr[3]%>,
  "HDI": <%= raw @hdindex[3]%>,
  "GII": <%= raw @gii[3]%>
}, {
"country": "<%= raw @countries[4]%>",
  "HPI": <%= raw @pfscr[4]%>,
  "HFI": <%= raw @hdscr[4]%>,
  "HEI": <%= raw @efscr[4]%>,
  "HDI": <%= raw @hdindex[4]%>,
  "GII": <%= raw @gii[4]%>
 
} ];


// Create axes
var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
categoryAxis.dataFields.category = "country";
categoryAxis.renderer.grid.template.location = 0;
categoryAxis.renderer.minGridDistance = 60;
categoryAxis.tooltip.disabled = true;

var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
valueAxis.renderer.minWidth = 50;
valueAxis.min = 0;
valueAxis.cursorTooltipEnabled = false;

function createValueAxis(title, showgrid) {
  
  // Create axis
  var axis = chart.yAxes.push(new am4charts.ValueAxis());
  axis.renderer.grid.template.disabled = !showgrid;
    
  // Set up axis title
  axis.title.text = title;

  return axis;
}

function createSeries(key, title, axis) {
  var series = chart.series.push(new am4charts.ColumnSeries());
  series.dataFields.valueY = key;
  series.dataFields.categoryX = "country";
  series.yAxis = axis;
  series.tooltipText = "";
  series.columns.template.strokeWidth = 0;
  

  series.columns.template.column.cornerRadiusTopLeft = 10;
  series.columns.template.column.cornerRadiusTopRight = 10;
  series.columns.template.column.fillOpacity = 0.8;
    

  return series;
}

createSeries(
  "HPI",
  "Series #1",
  createValueAxis("Human Personal Freedom Index", true)
);

createSeries(
  "HFI",
  "Series #2",
  createValueAxis("Human Freedom Index Score", false)
);

createSeries(
  "HEI",
  "Series #3",
  createValueAxis("Human Economic Freedom Index Score", false)
);

createSeries(
  "HDI",
  "Series #4",
  createValueAxis("Human Development Index ", false)
);

createSeries(
  "GII",
  "Series #3",
  createValueAxis("Global Inequality Index", false)
);
});
</script>
</div>

<div id="container">
<script type="text/javascript">
$(function () {
var myChart = Highcharts.chart('container', {
    chart: {
        type: 'column',
    },
    title: {
        text: 'Human Personal freedom Stats'
    },
    plotOptions: {
        column: {
            depth: 25
        }
    },
    xAxis: {
        categories: <%= raw @countries%>
    },
    series: [{
      name: 'Rule of Law',
      data: <%= raw @pfrol %>
    },{
      name: 'Security and Safety',
      data: <%= raw @pfss%>
    },{
      name: 'Moment',
      data: <%= raw @pfmov %>
    },{
      name: 'Religion',
      data: <%= raw @pfrel %>
    },{
      name: 'Association, Assembly, and Civil Society',
      data: <%= raw @pfass %>
    },{
      name: 'Expression and Information',
      data: <%= raw @pfexp %>
    },{
      name: 'Identity and Relationships',
      data: <%= raw @pdid %>
    }]
});
});

</script>
</div>




